<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
	<title>4.1. Введение в порты</title>
</head>
<link rel="stylesheet" href="../css/styles.css">
<body style="margin: 0px 150px 0px 150px">

<table summary="Header navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<th colspan="3" align="center">Управление пакетами в Calmira GNU/Linux</th>
</tr>

<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="index.html"
accesskey="P">Назад</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Домой</a></td>
<td width="33%" align="right" valign="top"><a href="intro_cpkg.html"
accesskey="N">Далее</a></td>

</tr>

<tr>
<td width="33%" align="left" valign="top">Управление пакетами</td>
<td width="34%" align="center" valign="top">&nbsp;</td>
<td width="33%" align="right" valign="top">Введение в cpkg</td>
</tr>
</table>

<hr align="LEFT" width="100%" />

<h1>4.1. Введение в порты</h1>

<p>Порты - относительно молодой (в Calmira), но, в тоже время, очень удобный инструмент управления ПО. На данный момент, с помощью портов можно только устанавливать и удалять ПО, но в скором времени будут доступны новые функции.</p>

<h2>4.1.1. Введение</h2>

<p>Система портов находится в <em><tt>/usr/ports</tt></em>. Всё ПО разделено на категории:</p>

<ol>
	<li><tt>base</tt> - базовые порты, входящие в минимальную поставку дистрибутива;</li>
	<li><tt>console</tt> - консольные утилиты;</li>
	<ul>
		<li><tt>editors</tt> - консольные текстовые редакторы;</li>
	</ul>
	<li><tt>kernel</tt> - ядро и его компоненты;</li>
	<li><tt>multimedia</tt> - мультимедиа утилиты;</li>
	<li><tt>network</tt> - программы для работы с сетью;</li>
	<ul>
		<li><tt>browsers</tt> - интернет-браузеры и менеджеры закачек;</li>
		<li><tt>connecting</tt> - утилиты для подключения сети;</li>
	</ul>
	<li><tt>optional</tt> - дополнительный софт, не вошедший в базовую поставку дистрибутива, но который может понадобиться после установки системы;</li>
	<ul>
		<li><tt>libs</tt> - не вошедшие в минимальную поставку библиотеки, которые могут понадобиться при сборке других пакетов;</li>
	</ul>
	<li><tt>programming</tt> - утилиты для программирования (компиляторы, IDE, библиотеки и пр.);</li>
	<ul>
		<li><tt>python-modules</tt> - модули ЯП Python;</li>
	</ul>
	<li><tt>xorg</tt> - сервер X и другое ПО, такое как оконные менеджеры и рабочие окружения;</li>
	<ul>
		<li><tt>x11-de</tt> - рабочие окружения для X11 (GNOME, KDE, Xfce);</li>
		<li><tt>x11-minimal</tt> - Xorg - минимальная реализация;</li>
		<ol>
			<li><tt>xlibs</tt> - дополнительные библиотеки для Xorg;</li>
			<li><tt>xdrivers</tt> - драйверы для Xorg;</li>
		</ol>
		<li><tt>x11-wm</tt> - оконные менеджеры для X11 (WMaker, Fluxbox);</li>
	</ul>
</ol>

<p>В каждой категории несколько подкаталогов с портом программы. Первые версии портов включают в себя только файл <em><tt>install</tt></em> с инструкциями по сборке, либо ещё <em><tt>info</tt></em> с информацией о пакете. В новых портах вместо <em><tt>info</tt></em> используется файл <em><tt>config.json</tt></em>, который предназначается ещё и для занесения пакета в базу данных <tt>port-utils</tt>.</p>

<h2>4.1.2. Установка программы из портов</h2>

<p>Для того, чтобы установить какую-либо программу из порта, нужно выполнить:</p>

<table border="1" width="100%" cellpadding="5"><colgroup>
	<col style="background-color:#eeddcc">
</colgroup>
<tr><td>
<pre>
# Переход в нужную директорию
cd /usr/ports/$КАТЕГОРИЯ/$ПРОГРАММА

# Выполнение инструкций сборки и установки
./install
</pre></td></tr></table>

<p>Так же, в директории с портом могут находиться следующие файлы:</p>

<ul>
	<li><tt>install_doc.sh</tt> - для установки дополнительной документации;</li>
	<li><tt>setup.html</tt> - инструкции по дальнейшей настройке пакета, которые трудно автоматизировать (нужно активное участие пользователя/администратора для выбора и изменения параметров, например), либо автоматизировать невозможно/не рекомендуется. Пригоден для открытия во всех известных браузерах. Типографские условные обозначения и прочее содержимое такое же, как и у этой документации.</li>
	<li><tt>setup.sh</tt> (<b>не путать с предыдущим <tt>setup.html</b></tt>!</b>) - содержит инструкции для автоматизированной настройки пакета после установки для КОНКРЕТНОГО пользователя, от чьего имени запускается этот скрипт. Обычно создаёт нужные директории и конфигурационные файлы в домашней папке (<tt>~/</tt>) того пользователя.</li>
	<li><tt>info</tt> (устаревший) - содержит описание пакета и его версию. На данный момент заменён на <tt>config.json</tt>, предоставляющий более обширные данные в более удобном формате <tt>json</tt>. Так же используется для добавления пакета в базу данных port-utils.</li>
</ul>

<p>Всё ПО из портов собирается из исходного кода. В некоторых случаях сборка может занять довольно много времени (так, например, пакет <tt>gcc</tt> на очень слабом железе может собираться до трёх дней). Однако, у сборки очень много преимуществ:</p>

<ul>
	<li>Возможность оптимизации программы под своё железо;</li>
	<li>Больший контроль при установке;</li>
	<li>Выбор нужных функций и удаление ненужных (если программа это поддерживает).</li>
</ul>

<p>Иногда пакеты предоставляют к установке дополнительную документацию. Она не всем нужна, поэтому мы оставили в портах возможность выбора пользователем: ставить её или нет. Система портов всегда спрашивает пользователя об этом. Если вы отказались от установки такой документации в будущем, но она вам пригодилась позже - перейдите в директорию с портом и выполните:</p>

<table border="1" width="100%" cellpadding="5"><colgroup>
	<col style="background-color:#eeddcc">
</colgroup>
<tr><td>
<pre>
chmod +x install_doc.sh
./install_doc.sh
</pre></td></tr></table>

<p>Этими командами вы установите документацию пакета.</p>

<p>Настоятельно советуется использовать порты вместо установки бинарных пакетов посредством <b>устаревшего</b> <tt>cpkg</tt>.</p>

<hr><h1>ВНИМАНИЕ! Пакетный менеджер cpkg устарел и в данный момент не используется. Инструкции из данного раздела неактуальны и вскоре будут удалены.</h1><hr>

<h2>4.1.3. port-пакеты cpkg</h2>

<p>Пакетный менеджер <tt>cpkg</tt> умеет устанавливать не только бинарные пакеты, но и собирать ПО из исходного кода. Но у такого подхода несколько минусов:</p>

<ul>
	<li>Отсутствие контроля. Если в портах каждую инструкцию можно изменить так, как нужно человеку, то в случае с port-пакетами cpkg так не случится. Для редактирования инструкций сборки предётся распаковывать пакет, править его, а потом запаковывать обратно.</li>
	<li>Нестабильность. Несмотря на то, что механизм port-пакетов уже достаточно стабилен, могут возникать ошибки.</li>
	<li>Небольшое число пакетов. Для пакетного менеджера <tt>cpkg</tt> очень мало port-пакетов. Выбор очень невелик, а единственный репозиторий с port-пакетами было принято решение закрыть после выхода полноценной системы портов.</li>
</ul>

<blockquote>Рекомендуется использовать систему портов, а не сборку port-пакетов с помощью cpkg.</blockquote>

<hr align="LEFT" width="100%" />

<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="index.html"
accesskey="P">Назад</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Домой</a></td>
<td width="33%" align="right" valign="top"><a href="intro_cpkg.html"
accesskey="N">Далее</a></td>

</tr>

<tr>
<td width="33%" align="left" valign="top">Управление пакетами</td>
<td width="34%" align="center" valign="top">&nbsp;</td>
<td width="33%" align="right" valign="top">Введение в cpkg</td>
</tr>
</table><br>
</body></table>
